#!/usr/bin/env bash
set -eo pipefail

# Run unit tests.
cargo test
echo "Unit tests passed"


# Run integration tests.
cargo build --release
poetry install
PROTOCOL_BUFFERS_PYTHON_IMPLEMENTATION=python poetry run pytest -v "$@"
echo "Integration tests passed"

echo "All tests passed"
